{"ast":null,"code":"import _objectSpread from\"/Users/leonardofernandesmartins/code/Leonardo-Projects/iFood/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useEffect,useContext}from\"react\";import GlobalStateContext from\"../../Global/GlobalStateContext\";import Footer from\"../../Footer/Footer\";import ShopCartCard from\"./ShopCartCard\";import useProtectedPage from\"../../Hooks/useProtectedPage\";import useRequestData from\"../../Hooks/useRequestData\";import{BASE_URL}from\"../../constants/urls\";import ShopCardForm from\"./ShopCardForm\";import Header from\"../../Header/Header\";import{useHistory}from\"react-router\";import{DivWhite}from\"./styled\";import{Restaurant}from\"@material-ui/icons\";var ShopCart=function ShopCart(){useProtectedPage();var history=useHistory();var getAddress=useRequestData([],\"\".concat(BASE_URL,\"/profile/address\"));var _useContext=useContext(GlobalStateContext),confirmBuy=_useContext.confirmBuy,setConfirmBuy=_useContext.setConfirmBuy;var _useContext2=useContext(GlobalStateContext),buyObject=_useContext2.buyObject,setBuyObject=_useContext2.setBuyObject;var _useContext3=useContext(GlobalStateContext),cart=_useContext3.cart,total=_useContext3.total,setTotal=_useContext3.setTotal;var confirmObject=cart&&cart.map(function(product){return{id:product.id,quantity:product.quantity};});useEffect(function(){var newConfirmBuy=_objectSpread(_objectSpread({},confirmBuy),{},{products:buyObject});buyObject&&setConfirmBuy(newConfirmBuy);},[buyObject]);useEffect(function(){confirmObject&&setBuyObject(confirmObject);},[cart]);useEffect(function(){var newTotal=0;cart.forEach(function(product){newTotal+=product.price*product.quantity;setTotal(newTotal);});},[cart]);var renderAdress=getAddress&&getAddress.address&&/*#__PURE__*/React.createElement(\"div\",null,\"\".concat(getAddress.address.street,\", \").concat(getAddress.address.number));return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,{history:history,title:\"Meu Carrinho\",logout:history}),/*#__PURE__*/React.createElement(\"p\",null,renderAdress),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",null,cart&&cart.length!==0?/*#__PURE__*/React.createElement(\"h3\",null,\"Subtotal: R$ \",total.toFixed(2)):/*#__PURE__*/React.createElement(\"h4\",null,\"Carrinho vazio\")),/*#__PURE__*/React.createElement(ShopCartCard,null),/*#__PURE__*/React.createElement(\"p\",null,\"Forma de pagamento\"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(ShopCardForm,null),/*#__PURE__*/React.createElement(DivWhite,null),/*#__PURE__*/React.createElement(Footer,{ShopCart:true}));};export default ShopCart;","map":{"version":3,"sources":["/Users/leonardofernandesmartins/code/Leonardo-Projects/iFood/src/Pages/ShopCart/ShopCart.js"],"names":["React","useEffect","useContext","GlobalStateContext","Footer","ShopCartCard","useProtectedPage","useRequestData","BASE_URL","ShopCardForm","Header","useHistory","DivWhite","Restaurant","ShopCart","history","getAddress","confirmBuy","setConfirmBuy","buyObject","setBuyObject","cart","total","setTotal","confirmObject","map","product","id","quantity","newConfirmBuy","products","newTotal","forEach","price","renderAdress","address","street","number","length","toFixed"],"mappings":"kLAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,UAA3B,KAA6C,OAA7C,CACA,MAAOC,CAAAA,kBAAP,KAA+B,iCAA/B,CACA,MAAOC,CAAAA,MAAP,KAAmB,qBAAnB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,8BAA7B,CACA,MAAOC,CAAAA,cAAP,KAA2B,4BAA3B,CACA,OAASC,QAAT,KAAyB,sBAAzB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,MAAOC,CAAAA,MAAP,KAAmB,qBAAnB,CACA,OAASC,UAAT,KAA2B,cAA3B,CACA,OAASC,QAAT,KAAyB,UAAzB,CACA,OAASC,UAAT,KAA2B,oBAA3B,CAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACrBR,gBAAgB,GAChB,GAAMS,CAAAA,OAAO,CAAGJ,UAAU,EAA1B,CAEA,GAAMK,CAAAA,UAAU,CAAGT,cAAc,CAAC,EAAD,WAAQC,QAAR,qBAAjC,CAJqB,gBAMiBN,UAAU,CAACC,kBAAD,CAN3B,CAMbc,UANa,aAMbA,UANa,CAMDC,aANC,aAMDA,aANC,kBAOehB,UAAU,CAACC,kBAAD,CAPzB,CAObgB,SAPa,cAObA,SAPa,CAOFC,YAPE,cAOFA,YAPE,kBAQalB,UAAU,CAACC,kBAAD,CARvB,CAQbkB,IARa,cAQbA,IARa,CAQPC,KARO,cAQPA,KARO,CAQAC,QARA,cAQAA,QARA,CAUrB,GAAMC,CAAAA,aAAa,CACjBH,IAAI,EACJA,IAAI,CAACI,GAAL,CAAS,SAACC,OAAD,CAAa,CACpB,MAAO,CACLC,EAAE,CAAED,OAAO,CAACC,EADP,CAELC,QAAQ,CAAEF,OAAO,CAACE,QAFb,CAAP,CAID,CALD,CAFF,CASA3B,SAAS,CAAC,UAAM,CACd,GAAM4B,CAAAA,aAAa,gCAAQZ,UAAR,MAAoBa,QAAQ,CAAEX,SAA9B,EAAnB,CACAA,SAAS,EAAID,aAAa,CAACW,aAAD,CAA1B,CACD,CAHQ,CAGN,CAACV,SAAD,CAHM,CAAT,CAKAlB,SAAS,CAAC,UAAM,CACduB,aAAa,EAAIJ,YAAY,CAACI,aAAD,CAA7B,CACD,CAFQ,CAEN,CAACH,IAAD,CAFM,CAAT,CAIApB,SAAS,CAAC,UAAM,CACd,GAAI8B,CAAAA,QAAQ,CAAG,CAAf,CACAV,IAAI,CAACW,OAAL,CAAa,SAACN,OAAD,CAAa,CACxBK,QAAQ,EAAIL,OAAO,CAACO,KAAR,CAAgBP,OAAO,CAACE,QAApC,CACAL,QAAQ,CAACQ,QAAD,CAAR,CACD,CAHD,EAID,CANQ,CAMN,CAACV,IAAD,CANM,CAAT,CAQA,GAAMa,CAAAA,YAAY,CAAGlB,UAAU,EAAIA,UAAU,CAACmB,OAAzB,eACnB,yCAASnB,UAAU,CAACmB,OAAX,CAAmBC,MAA5B,cAAuCpB,UAAU,CAACmB,OAAX,CAAmBE,MAA1D,EADF,CAIA,mBACE,4CACE,oBAAC,MAAD,EAAQ,OAAO,CAAEtB,OAAjB,CAA0B,KAAK,CAAE,cAAjC,CAAiD,MAAM,CAAEA,OAAzD,EADF,cAEE,6BAAImB,YAAJ,CAFF,cAGE,8BAHF,cAIE,+BACGb,IAAI,EAAIA,IAAI,CAACiB,MAAL,GAAgB,CAAxB,cACC,8CAAkBhB,KAAK,CAACiB,OAAN,CAAc,CAAd,CAAlB,CADD,cAGC,+CAJJ,CAJF,cAWE,oBAAC,YAAD,MAXF,cAYE,kDAZF,cAaE,8BAbF,cAcE,oBAAC,YAAD,MAdF,cAeE,oBAAC,QAAD,MAfF,cAgBE,oBAAC,MAAD,EAAQ,QAAQ,CAAE,IAAlB,EAhBF,CADF,CAoBD,CA5DD,CA6DA,cAAezB,CAAAA,QAAf","sourcesContent":["import React, { useEffect, useContext } from \"react\";\nimport GlobalStateContext from \"../../Global/GlobalStateContext\";\nimport Footer from \"../../Footer/Footer\";\nimport ShopCartCard from \"./ShopCartCard\";\nimport useProtectedPage from \"../../Hooks/useProtectedPage\";\nimport useRequestData from \"../../Hooks/useRequestData\";\nimport { BASE_URL } from \"../../constants/urls\";\nimport ShopCardForm from \"./ShopCardForm\";\nimport Header from \"../../Header/Header\";\nimport { useHistory } from \"react-router\";\nimport { DivWhite } from \"./styled\";\nimport { Restaurant } from \"@material-ui/icons\";\n\nconst ShopCart = () => {\n  useProtectedPage();\n  const history = useHistory();\n\n  const getAddress = useRequestData([], `${BASE_URL}/profile/address`);\n\n  const { confirmBuy, setConfirmBuy } = useContext(GlobalStateContext);\n  const { buyObject, setBuyObject } = useContext(GlobalStateContext);\n  const { cart, total, setTotal } = useContext(GlobalStateContext);\n\n  const confirmObject =\n    cart &&\n    cart.map((product) => {\n      return {\n        id: product.id,\n        quantity: product.quantity,\n      };\n    });\n\n  useEffect(() => {\n    const newConfirmBuy = { ...confirmBuy, products: buyObject };\n    buyObject && setConfirmBuy(newConfirmBuy);\n  }, [buyObject]);\n\n  useEffect(() => {\n    confirmObject && setBuyObject(confirmObject);\n  }, [cart]);\n\n  useEffect(() => {\n    let newTotal = 0;\n    cart.forEach((product) => {\n      newTotal += product.price * product.quantity;\n      setTotal(newTotal);\n    });\n  }, [cart]);\n\n  const renderAdress = getAddress && getAddress.address && (\n    <div>{`${getAddress.address.street}, ${getAddress.address.number}`}</div>\n  );\n\n  return (\n    <div>\n      <Header history={history} title={\"Meu Carrinho\"} logout={history} />\n      <p>{renderAdress}</p>\n      <hr />\n      <div>\n        {cart && cart.length !== 0 ? (\n          <h3>Subtotal: R$ {total.toFixed(2)}</h3>\n        ) : (\n          <h4>Carrinho vazio</h4>\n        )}\n      </div>\n      <ShopCartCard />\n      <p>Forma de pagamento</p>\n      <hr />\n      <ShopCardForm />\n      <DivWhite></DivWhite>\n      <Footer ShopCart={true} />\n    </div>\n  );\n};\nexport default ShopCart;\n"]},"metadata":{},"sourceType":"module"}