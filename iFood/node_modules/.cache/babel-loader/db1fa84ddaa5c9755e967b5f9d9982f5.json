{"ast":null,"code":"import _objectSpread from\"/Users/leonardofernandesmartins/code/Leonardo-Projects/iFood/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/leonardofernandesmartins/code/Leonardo-Projects/iFood/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import React,{useEffect}from\"react\";import{useHistory}from\"react-router\";import{BASE_URL}from\"../../constants/urls\";import Header from\"../../Header/Header\";import useForm from\"../../Hooks/useForm\";import useProtectedPage from\"../../Hooks/useProtectedPage\";import{goToProfile,goToUpDateProfile,goToUpDateAddress}from\"../../Router/Coordinator\";import edit from\"../../assets/edit.png\";import Footer from\"../../Footer/Footer\";import{ProfileAddress,ProfileData,ProfileContainer}from\"./styled\";import OrderHistory from\"./OrderHistory\";var ProfilePage=function ProfilePage(){useProtectedPage();var _useForm=useForm({name:\"\",email:\"\",cpf:\"\",address:\"\"}),_useForm2=_slicedToArray(_useForm,4),form=_useForm2[0],onChange=_useForm2[1],clear=_useForm2[2],setForm=_useForm2[3];var history=useHistory();var token=localStorage.getItem(\"token\");var onSubmitForm=function onSubmitForm(event){event.preventDefault();goToProfile(history);};useEffect(function(){getProfile();},[]);var getProfile=function getProfile(){axios.get(\"\".concat(BASE_URL,\"/profile\"),{headers:{auth:\"\".concat(token)}}).then(function(res){setForm(_objectSpread(_objectSpread({},form),{},{name:res.data.user.name,email:res.data.user.email,cpf:res.data.user.cpf,address:res.data.user.address}));}).catch(function(err){alert(err);});};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(ProfileContainer,null,/*#__PURE__*/React.createElement(Header,{history:history,title:\"Perfil\",logout:history}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h4\",null,\"Dados cadastrados:\"),/*#__PURE__*/React.createElement(ProfileData,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,form.name),/*#__PURE__*/React.createElement(\"p\",null,form.email),/*#__PURE__*/React.createElement(\"p\",null,form.cpf)),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return goToUpDateProfile(history);}},/*#__PURE__*/React.createElement(\"img\",{src:edit}))),/*#__PURE__*/React.createElement(\"h4\",null,\"Endere\\xE7o cadastrado:\"),/*#__PURE__*/React.createElement(ProfileAddress,null,/*#__PURE__*/React.createElement(\"p\",null,form.address),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return goToUpDateAddress(history);}},/*#__PURE__*/React.createElement(\"img\",{src:edit}))),/*#__PURE__*/React.createElement(OrderHistory,null)),/*#__PURE__*/React.createElement(Footer,{profile:true}));};export default ProfilePage;","map":{"version":3,"sources":["/Users/leonardofernandesmartins/code/Leonardo-Projects/iFood/src/Pages/Profile/ProfilePage.js"],"names":["axios","React","useEffect","useHistory","BASE_URL","Header","useForm","useProtectedPage","goToProfile","goToUpDateProfile","goToUpDateAddress","edit","Footer","ProfileAddress","ProfileData","ProfileContainer","OrderHistory","ProfilePage","name","email","cpf","address","form","onChange","clear","setForm","history","token","localStorage","getItem","onSubmitForm","event","preventDefault","getProfile","get","headers","auth","then","res","data","user","catch","err","alert"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport React, { useEffect } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { BASE_URL } from \"../../constants/urls\";\nimport Header from \"../../Header/Header\";\nimport useForm from \"../../Hooks/useForm\";\nimport useProtectedPage from \"../../Hooks/useProtectedPage\";\nimport {\n  goToProfile,\n  goToUpDateProfile,\n  goToUpDateAddress,\n} from \"../../Router/Coordinator\";\nimport edit from \"../../assets/edit.png\";\nimport Footer from \"../../Footer/Footer\";\nimport { ProfileAddress, ProfileData, ProfileContainer } from \"./styled\";\nimport OrderHistory from \"./OrderHistory\";\n\nconst ProfilePage = () => {\n  useProtectedPage();\n\n  const [form, onChange, clear, setForm] = useForm({\n    name: \"\",\n    email: \"\",\n    cpf: \"\",\n    address: \"\",\n  });\n\n  const history = useHistory();\n\n  const token = localStorage.getItem(\"token\");\n  const onSubmitForm = (event) => {\n    event.preventDefault();\n    goToProfile(history);\n  };\n  useEffect(() => {\n    getProfile();\n  }, []);\n  const getProfile = () => {\n    axios\n      .get(`${BASE_URL}/profile`, {\n        headers: {\n          auth: `${token}`,\n        },\n      })\n      .then((res) => {\n        setForm({\n          ...form,\n          name: res.data.user.name,\n          email: res.data.user.email,\n          cpf: res.data.user.cpf,\n          address: res.data.user.address,\n        });\n      })\n      .catch((err) => {\n        alert(err);\n      });\n  };\n\n  return (\n    <div>\n      <ProfileContainer>\n        <Header history={history} title={\"Perfil\"} logout={history} />\n        <br/><h4>Dados cadastrados:</h4>\n        <ProfileData>\n          <div>\n            <p>{form.name}</p>\n            <p>{form.email}</p>\n            <p>{form.cpf}</p>\n          </div>\n          <button onClick={() => goToUpDateProfile(history)}>\n            <img src={edit} />\n          </button>\n        </ProfileData>\n\n        <h4>Endere√ßo cadastrado:</h4>\n        <ProfileAddress>\n          <p>{form.address}</p>\n          <button onClick={() => goToUpDateAddress(history)}>\n            <img src={edit} />\n          </button>\n        </ProfileAddress>\n\n        <OrderHistory />\n      </ProfileContainer>\n      <Footer profile={true} />\n    </div>\n  );\n};\n\nexport default ProfilePage;\n"]},"metadata":{},"sourceType":"module"}