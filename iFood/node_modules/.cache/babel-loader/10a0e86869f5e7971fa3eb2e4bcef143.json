{"ast":null,"code":"import _slicedToArray from\"/Users/leonardofernandesmartins/code/Leonardo-Projects/iFood/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Button,TextField}from\"@material-ui/core\";import axios from\"axios\";import React,{useEffect,useState}from\"react\";import{useHistory}from\"react-router\";import{BASE_URL}from\"../../constants/urls\";import useProtectedPage from\"../../Hooks/useProtectedPage\";import Footer from\"../../Footer/Footer\";import{DivHistory,CardHistory}from\"./styled\";var OrderHistory=function OrderHistory(){useProtectedPage();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),historyItems=_useState2[0],setHistoryItems=_useState2[1];var history=useHistory();var token=localStorage.getItem(\"token\");useEffect(function(){getOrderHistory();},[]);var getOrderHistory=function getOrderHistory(){axios.get(\"\".concat(BASE_URL,\"/orders/history\"),{headers:{auth:\"\".concat(token)}}).then(function(res){setHistoryItems(res.data.orders);}).catch(function(err){console.log(err);});};var mappedItems=historyItems.map(function(item){var date=new Date(item.createdAt).toISOString().substring(0,10);var parsedDate=date.split(\"-\");return/*#__PURE__*/React.createElement(CardHistory,{key:item.createdAt},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h4\",null,item.restaurantName),/*#__PURE__*/React.createElement(\"p\",null,\"\".concat(parsedDate[2],\" / \").concat(parsedDate[1],\" / \").concat(parsedDate[0])),/*#__PURE__*/React.createElement(\"p\",null,\"Subtotal: R$\",item.totalPrice));});return/*#__PURE__*/React.createElement(DivHistory,null,/*#__PURE__*/React.createElement(\"h2\",null,\"Hist\\xF3rico de Pedidos\"),/*#__PURE__*/React.createElement(\"hr\",null),mappedItems);};export default OrderHistory;","map":{"version":3,"sources":["/Users/leonardofernandesmartins/code/Leonardo-Projects/iFood/src/Pages/Profile/OrderHistory.js"],"names":["Button","TextField","axios","React","useEffect","useState","useHistory","BASE_URL","useProtectedPage","Footer","DivHistory","CardHistory","OrderHistory","historyItems","setHistoryItems","history","token","localStorage","getItem","getOrderHistory","get","headers","auth","then","res","data","orders","catch","err","console","log","mappedItems","map","item","date","Date","createdAt","toISOString","substring","parsedDate","split","restaurantName","totalPrice"],"mappings":"mLAAA,OAASA,MAAT,CAAiBC,SAAjB,KAAkC,mBAAlC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,UAAT,KAA2B,cAA3B,CACA,OAASC,QAAT,KAAyB,sBAAzB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,8BAA7B,CACA,MAAOC,CAAAA,MAAP,KAAmB,qBAAnB,CACA,OAASC,UAAT,CAAqBC,WAArB,KAAwC,UAAxC,CAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzBJ,gBAAgB,GADS,cAEeH,QAAQ,CAAC,EAAD,CAFvB,wCAElBQ,YAFkB,eAEJC,eAFI,eAIzB,GAAMC,CAAAA,OAAO,CAAGT,UAAU,EAA1B,CAEA,GAAMU,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CAEAd,SAAS,CAAC,UAAM,CACde,eAAe,GAChB,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAMA,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC5BjB,KAAK,CACFkB,GADH,WACUb,QADV,oBACqC,CACjCc,OAAO,CAAE,CACPC,IAAI,WAAKN,KAAL,CADG,CADwB,CADrC,EAMGO,IANH,CAMQ,SAACC,GAAD,CAAS,CACbV,eAAe,CAACU,GAAG,CAACC,IAAJ,CAASC,MAAV,CAAf,CACD,CARH,EASGC,KATH,CASS,SAACC,GAAD,CAAS,CACdC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACD,CAXH,EAYD,CAbD,CAeA,GAAMG,CAAAA,WAAW,CAAGlB,YAAY,CAACmB,GAAb,CAAiB,SAACC,IAAD,CAAU,CAC7C,GAAMC,CAAAA,IAAI,CAAG,GAAIC,CAAAA,IAAJ,CAASF,IAAI,CAACG,SAAd,EAAyBC,WAAzB,GAAuCC,SAAvC,CAAiD,CAAjD,CAAoD,EAApD,CAAb,CACA,GAAMC,CAAAA,UAAU,CAAGL,IAAI,CAACM,KAAL,CAAW,GAAX,CAAnB,CACA,mBACE,oBAAC,WAAD,EAAa,GAAG,CAAEP,IAAI,CAACG,SAAvB,eACE,8BADF,cACO,8BAAKH,IAAI,CAACQ,cAAV,CADP,cAEE,uCAAOF,UAAU,CAAC,CAAD,CAAjB,eAA0BA,UAAU,CAAC,CAAD,CAApC,eAA6CA,UAAU,CAAC,CAAD,CAAvD,EAFF,cAGE,4CAAgBN,IAAI,CAACS,UAArB,CAHF,CADF,CAOD,CAVmB,CAApB,CAYA,mBACE,oBAAC,UAAD,mBACE,wDADF,cAEE,8BAFF,CAGGX,WAHH,CADF,CAOD,CA9CD,CAgDA,cAAenB,CAAAA,YAAf","sourcesContent":["import { Button, TextField } from \"@material-ui/core\";\nimport axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { BASE_URL } from \"../../constants/urls\";\nimport useProtectedPage from \"../../Hooks/useProtectedPage\";\nimport Footer from \"../../Footer/Footer\";\nimport { DivHistory, CardHistory } from \"./styled\";\n\nconst OrderHistory = () => {\n  useProtectedPage();\n  const [historyItems, setHistoryItems] = useState([]);\n\n  const history = useHistory();\n\n  const token = localStorage.getItem(\"token\");\n\n  useEffect(() => {\n    getOrderHistory();\n  }, []);\n\n  const getOrderHistory = () => {\n    axios\n      .get(`${BASE_URL}/orders/history`, {\n        headers: {\n          auth: `${token}`,\n        },\n      })\n      .then((res) => {\n        setHistoryItems(res.data.orders);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  const mappedItems = historyItems.map((item) => {\n    const date = new Date(item.createdAt).toISOString().substring(0, 10);\n    const parsedDate = date.split(\"-\");\n    return (\n      <CardHistory key={item.createdAt}>\n        <br/><h4>{item.restaurantName}</h4>\n        <p>{`${parsedDate[2]} / ${parsedDate[1]} / ${parsedDate[0]}`}</p>\n        <p>Subtotal: R${item.totalPrice}</p>\n      </CardHistory>\n    );\n  });\n\n  return (\n    <DivHistory>\n      <h2>Hist√≥rico de Pedidos</h2>\n      <hr/>\n      {mappedItems}\n    </DivHistory>\n  );\n};\n\nexport default OrderHistory;\n"]},"metadata":{},"sourceType":"module"}