{"ast":null,"code":"import _objectSpread from\"/Users/leonardofernandesmartins/code/Leonardo-Projects/iFood/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/leonardofernandesmartins/code/Leonardo-Projects/iFood/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Button,TextField}from\"@material-ui/core\";import axios from\"axios\";import React,{useEffect}from\"react\";import{useHistory}from\"react-router\";import{BASE_URL}from\"../../constants/urls\";import Header from\"../../Header/Header\";import useForm from\"../../Hooks/useForm\";import useProtectedPage from\"../../Hooks/useProtectedPage\";import{goToProfile}from\"../../Router/Coordinator\";import{InputsContainer,ScreenContainer}from\"./styled\";var UpDateProfile=function UpDateProfile(){useProtectedPage();var _useForm=useForm({name:\"\",email:\"\",cpf:\"\"}),_useForm2=_slicedToArray(_useForm,4),form=_useForm2[0],onChange=_useForm2[1],clear=_useForm2[2],setForm=_useForm2[3];var history=useHistory();var token=localStorage.getItem('token');var onSubmitForm=function onSubmitForm(event){event.preventDefault();upDate();goToProfile(history);};useEffect(function(){getProfile();},[]);var getProfile=function getProfile(){axios.get(\"\".concat(BASE_URL,\"/profile\"),{headers:{auth:\"\".concat(token)}}).then(function(res){setForm(_objectSpread(_objectSpread({},form),{},{name:res.data.user.name,email:res.data.user.email,cpf:res.data.user.cpf}));}).catch(function(err){console.log(\"erro\",err);});};var upDate=function upDate(){axios.put(\"\".concat(BASE_URL,\"/profile\"),form,{headers:{auth:\"\".concat(token)}}).then(function(res){alert(\"Atualizado\");}).catch(function(err){console.log(\"erro \",err);});};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,{history:history,title:\"Editar Perfil\"}),/*#__PURE__*/React.createElement(ScreenContainer,null,/*#__PURE__*/React.createElement(InputsContainer,null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:onSubmitForm},/*#__PURE__*/React.createElement(TextField,{type:\"text\",name:\"name\",value:form.name,onChange:onChange,label:\"Nome:\",variant:\"outlined\",margin:\"normal\",fullWidth:true,required:true}),/*#__PURE__*/React.createElement(TextField,{type:\"email\",name:\"email\",value:form.email,onChange:onChange,label:\"E-mail:\",variant:\"outlined\",margin:\"normal\",fullWidth:true,required:true}),/*#__PURE__*/React.createElement(TextField,{type:\"text\",name:\"cpf\",value:form.cpf,onChange:onChange,label:\"CPF:\",variant:\"outlined\",margin:\"normal\",fullWidth:true,required:true}),/*#__PURE__*/React.createElement(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",margin:\"normal\"},\"Salvar\")))));};export default UpDateProfile;","map":{"version":3,"sources":["/Users/leonardofernandesmartins/code/Leonardo-Projects/iFood/src/Pages/UpDateProfile/UpDadeProfile.js"],"names":["Button","TextField","axios","React","useEffect","useHistory","BASE_URL","Header","useForm","useProtectedPage","goToProfile","InputsContainer","ScreenContainer","UpDateProfile","name","email","cpf","form","onChange","clear","setForm","history","token","localStorage","getItem","onSubmitForm","event","preventDefault","upDate","getProfile","get","headers","auth","then","res","data","user","catch","err","console","log","put","alert"],"mappings":"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","sourcesContent":["import { Button, TextField } from \"@material-ui/core\";\nimport axios from \"axios\";\nimport React, { useEffect } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { BASE_URL } from \"../../constants/urls\";\nimport Header from \"../../Header/Header\";\nimport useForm from \"../../Hooks/useForm\";\nimport useProtectedPage from \"../../Hooks/useProtectedPage\";\nimport { goToProfile } from \"../../Router/Coordinator\";\nimport { InputsContainer, ScreenContainer } from \"./styled\";\n\nconst UpDateProfile = () => {\n    useProtectedPage();\n\n    const [form, onChange, clear, setForm] = useForm({\n        name: \"\",\n        email: \"\",\n        cpf: \"\"\n    })\n\n    const history =useHistory()\n    const token = localStorage.getItem('token')\n    const onSubmitForm = (event) => {\n        event.preventDefault()\n        upDate()\n        goToProfile(history)\n    }\n    useEffect(()=>{\n        getProfile()\n    },[])\n    const getProfile = () => {\n        axios.get(`${BASE_URL}/profile`, {\n            headers:{\n                auth: `${token}`\n            }}).then((res)=> {\n                setForm({...form,\n                     name: res.data.user.name,\n                     email: res.data.user.email,\n                     cpf: res.data.user.cpf\n                })\n            }).catch((err)=> {\n                console.log(\"erro\", err)\n            })\n    }\n\n    const upDate = () => {\n        axios.put(`${BASE_URL}/profile`, form, {\n            headers:{\n                auth: `${token}`\n            }}).then((res) => {\n                alert(\"Atualizado\")\n            }).catch((err)=>{\n                console.log(\"erro \", err)\n            })\n    }\n\n    return (\n        <div>\n            <Header history={history} title = {\"Editar Perfil\"}/>\n        <ScreenContainer>\n            <InputsContainer>\n                <form onSubmit={onSubmitForm}>\n                    <TextField\n                        type={\"text\"}\n                        name={\"name\"}\n                        value={form.name}\n                        onChange={onChange}\n                        label={\"Nome:\"}\n                        variant={\"outlined\"}\n                        margin={\"normal\"}\n                        fullWidth\n                        required\n                    />\n                    <TextField\n                        type={\"email\"}\n                        name={\"email\"}\n                        value={form.email}\n                        onChange={onChange}\n                        label={\"E-mail:\"}\n                        variant={\"outlined\"}\n                        margin={\"normal\"}\n                        fullWidth\n                        required\n                    />\n                    <TextField\n                        type={\"text\"}\n                        name={\"cpf\"}\n                        value={form.cpf}\n                        onChange={onChange}\n                        label={\"CPF:\"}\n                        variant={\"outlined\"}\n                        margin={\"normal\"}\n                        fullWidth\n                        required\n                    />\n                    <Button\n                        type={\"submit\"}\n                        fullWidth\n                        variant={\"contained\"}\n                        color={\"primary\"}\n                        margin={\"normal\"}\n                    >\n                        Salvar\n                    </Button>\n                </form>\n            </InputsContainer>\n        </ScreenContainer>\n        </div>\n    )\n};\n\nexport default UpDateProfile;\n"]},"metadata":{},"sourceType":"module"}